{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"14065997-636d53df3ecdad4eb4f635f43\"; // встав свій ключ\nconst BASE_URL = \"https://pixabay.com/api/\";\n\n\nexport async function getImagesByQuery(query, page) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    per_page: 15,\n    page,\n  };\n\n  const response = await axios.get(BASE_URL, { params });  \n  return response.data; // <-- саме це вимагає завдання\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryContainer = document.querySelector(\".gallery\");\nconst loader = document.querySelector('.loader-container');\nconst loadMoreBtn= document.querySelector('.additional-button');\n\n// Створюємо екземпляр модального вікна\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\n// Створює HTML-розмітку галереї та оновлює lightbox\nexport function createGallery(images) {\n    const markup = images\n        .map(\n            img => `\n                <li class=\"gallery-item\">\n                    <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n                        <img class=\"gallery-image\" src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n                    </a>\n                    <div class=\"galery-info-container\">\n                        <div class=\"galery-info-column\">\n                            <span class=\"galery-info-title\">Likes</span>\n                            <span class=\"galery-info-value\">${img.likes}</span>\n                        </div>\n                        <div class=\"galery-info-column\">\n                            <span class=\"galery-info-title\">Views</span>\n                            <span class=\"galery-info-value\">${img.views}</span>\n                        </div>\n                        <div class=\"galery-info-column\">\n                            <span class=\"galery-info-title\">Comments</span>\n                            <span class=\"galery-info-value\">${img.comments}</span>\n                        </div>\n                        <div class=\"galery-info-column\">\n                            <span class=\"galery-info-title\">Downloads</span>\n                            <span class=\"galery-info-value\">${img.downloads}</span>\n                        </div>\n                    </div>\n                </li>\n            `\n        )\n        .join(\"\");\n\n    galleryContainer.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\n// Очищає галерею\nexport function clearGallery() {   \n    galleryContainer.innerHTML = \"\";\n}\n\n// Показує лоадер\nexport function showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\n// Ховає лоадер\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.classList.add(\"hidden\");\n}\n","import { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton\n} from \"./js/render-functions.js\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.additional-button');\nlet galeryItemCardHeight = 0;\nlet searchValue = \"\";\nlet page = 1;\nlet imagesNumber = 0;\nlet totalHits = 0;\n\nfunction isTheEnd() {\n    if (totalHits === imagesNumber) {\n        iziToast.warning({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: \"topRight\",\n        });\n        return true;\n    }\n    return false;\n}\n\nform.addEventListener(\"submit\", async event => {\n    event.preventDefault();\n    hideLoadMoreButton();\n    page = 1;\n    const query = event.target.elements[\"search-text\"].value.trim();\n\n    if (!query) {\n        iziToast.warning({\n            message: \"Please enter a search query!\",\n            position: \"topRight\",\n        });\n        return;\n    } else {\n        try {\n            clearGallery();\n            showLoader();\n            const images = await getImagesByQuery(query, page)\n            if (images.hits.length === 0) {\n                iziToast.warning({\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: \"topRight\",\n                });\n            } else {\n                imagesNumber = images.hits.length;\n                totalHits = images.totalHits;\n                createGallery(images.hits)\n                if (!isTheEnd()) {\n                    showLoadMoreButton();\n                }\n                searchValue = query;\n                page++;\n                galeryItemCardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n            }\n        } catch (e) {\n            iziToast.warning({\n                message: \"Something went wrong!\",\n                position: \"topRight\",\n            });\n        } finally {\n            hideLoader();\n        }\n\n    }\n\n    // далі — запит до API\n\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n    try {\n        hideLoadMoreButton();\n        showLoader();\n        const images = await getImagesByQuery(searchValue, page);\n        imagesNumber = imagesNumber + images.hits.length;\n        createGallery(images.hits);\n\n        page++;\n        window.scrollBy({ top: galeryItemCardHeight * 2, left:0, behavior: \"smooth\" });\n    } catch (e) {\n        iziToast.warning({\n            message: \"Something went wrong!\",\n            position: \"topRight\",\n        });\n    } finally {\n        hideLoader();\n        if (isTheEnd()) {\n            hideLoadMoreButton()\n        } else {\n            showLoadMoreButton();\n        }\n    }\n\n})\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","params","axios","galleryContainer","loader","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","markup","img","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","galeryItemCardHeight","searchValue","imagesNumber","totalHits","isTheEnd","iziToast","event"],"mappings":"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"}